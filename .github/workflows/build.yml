name: Build Android APK
on: [push]
jobs:
  build-with-reanimated:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup
        uses: actions/setup-node@v4
        with:
          node-version: "18"

      - name: Install
        run: npm ci

      - name: Build with New Arch
        run: |
          # Activer New Architecture
          sed -i 's/"newArchEnabled": false/"newArchEnabled": true/' app.json || true
          echo "newArchEnabled=true" > android/gradle
